<div class="mb-6">
  <h1 class="text-2xl font-bold text-slate-900">Runs</h1>
</div>

<div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
  <table class="min-w-full divide-y divide-slate-200">
    <thead class="bg-slate-50">
      <tr>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">ID</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Job</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Status</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Task</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Started</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Finished</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"></th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-slate-200">
      <% @runs.each do |r| %>
        <tr class="hover:bg-slate-50/50">
          <td class="px-6 py-4 whitespace-nowrap text-sm">
            <a href="/runs/<%= r.id %>" class="font-medium text-blue-600 hover:text-blue-800"><%= r.id %></a>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500"><%= r.job_id %></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <% status_class = case r.status
               when 'queued' then 'bg-indigo-100 text-indigo-800'
               when 'running' then 'bg-amber-100 text-amber-800'
               when 'succeeded' then 'bg-emerald-100 text-emerald-800'
               when 'failed' then 'bg-red-100 text-red-800'
               when 'cancelled' then 'bg-slate-100 text-slate-600'
               else 'bg-slate-100 text-slate-600'
               end %>
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium <%= status_class %>"><%= r.status %></span>
          </td>
          <td class="px-6 py-4 text-sm text-slate-500"><%= r.task_name %></td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500"><%= r.started_at %></td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500"><%= r.finished_at %></td>
          <td class="px-6 py-4 whitespace-nowrap text-sm">
            <% if %w[succeeded failed cancelled].include?(r.status) %>
              <form method="post" action="/runs/<%= r.id %>/rerun" class="inline">
                <button type="submit" class="text-blue-600 hover:text-blue-800 font-medium">Rerun</button>
              </form>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
